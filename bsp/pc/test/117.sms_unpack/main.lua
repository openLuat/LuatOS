
-- LuaTools需要PROJECT和VERSION这两个信息
PROJECT = "sms_unpack"
VERSION = "1.0.0"


sys.taskInit(function()
    -- 测试sms.unpack函数
    local pdu_hex = "0891683108200955F1640AA001568800030008621070819583238B060804BC200503FF0C67096548671F518553EF968F65F690008BA2FF0C5982970090008BA28BF762E86253003100300030003800365BA2670D70ED7EBF6216901A8FC7652F4ED85B9D53CC00564F1A54585C0F7A0B5E8F90008BA2FF0C90008BA2540E4EA754C16B2167088D775931654830024EA754C1670D52A15305542B901A75286D4191CF65E55305"
    log.info("PDU Hex:", pdu_hex)
    local phone, txt, meta = sms.unpack(pdu_hex)

    log.info("phone", phone)
    log.info("txt", txt)
    log.info("meta:", json.encode(meta or {}))

    -- 以下是长短信的5部分,需要组装
    -- 0891683108200955F1640AA001568800030008621070819583238B060804BC200503FF0C67096548671F518553EF968F65F690008BA2FF0C5982970090008BA28BF762E86253003100300030003800365BA2670D70ED7EBF6216901A8FC7652F4ED85B9D53CC00564F1A54585C0F7A0B5E8F90008BA2FF0C90008BA2540E4EA754C16B2167088D775931654830024EA754C1670D52A15305542B901A75286D4191CF65E55305
    -- 0891683108200955F1640AA001568800030008621070819583238B060804BC200502004A0054003200300037003600360037FF09FF0C8BA28D2D6210529F540E7ACB5373751F6548FF0C8D448D390031002E003900395143002F6708FF0C4EA754C167096548671F00335E74FF0C598253CC65B9572867096548671F5C4A6EE1524D65E05F028BAEFF0C67096548671F81EA52A87EED5C55FF0C6BCF6B217EED5C5500335E74
    -- 0891683108200955F1640AA001568800030008621070819583238B060804BC20050453CA751F6D3B793C5238FF0C51774F534EE5987597625C55793A4E3A51C63002672C4EA754C165E054087EA663467ED1FF0C90008BA2002F95006237002F643A8F6C7B4965E09700627F62C58FDD7EA68D234EFB30024EE54E0A9A8C8BC1780100355206949F518567096548FF0C8BF752FF6CC4973262168F6C53D14ED64EBA30023010
    -- 0891683108200955F1640AA001568800030008621070819583238B060804BC20050130109A8C8BC15BC67801301160A876849A8C8BC178014E3A003100340031003730025C0A656C76845BA26237FF0C60A86B6357284E2D56FD79FB52A876847EBF4E0A6E2090538BA28D2D4E2D56FD79FB52A8002D652F4ED85B9D53CC00564F1A54585C0A4EAB674376CAFF088BDD8D39652F4ED87248FF09FF087F1653F7FF1A00320035
    -- 0891683108200955F1640AA0015688000300086210708195832321060804BC2005054E2D56FD79FB52A80058652F4ED85B9D53CC00564F1A54583011

    -- 测试单条数据
    pdu_hex = "07919761989900F0040B919761564321F60000911060317391800AE8329BFD4697D9EC37"
    log.info("PDU Hex:", pdu_hex)
    local phone, txt, meta = sms.unpack(pdu_hex)
    log.info("phone", phone)
    log.info("txt", txt)
    log.info("meta:", json.encode(meta or {}))
end)

-- 用户代码已结束---------------------------------------------
-- 结尾总是这一句
sys.run()
-- sys.run()之后后面不要加任何语句!!!!!
