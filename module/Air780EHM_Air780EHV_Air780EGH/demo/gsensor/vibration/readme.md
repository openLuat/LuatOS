
## 演示功能概述

使用Air780EGG核心板，本示例主要是展示exvib库的使用，提供了三种场景应用：

1，微小震动检测：用于检测轻微震动的场景，例如用手敲击桌面；加速度量程2g；

2，运动检测：用于电动车或汽车行驶时的检测和人行走和跑步时的检测；加速度量程4g；

3，跌倒检测：用于人或物体瞬间跌倒时的检测；加速度量程8g；

在震动检测方面提供了两种模式，有效震动模式和持续震动检测模式：

持续震动检测模式：震动强度超过设定阈值时，会进入中断处理函数，获取xyz三轴的数据

有效震动模式：当10秒内触发5次震动强度超过设定阈值时，持续触发震动事件，并执行相应的处理函数，30分钟内只能触发一次，直到30分钟之后，再重新开始检测

## 演示软件使用说明

## 演示硬件环境

1、Air780EGG核心板一块

2、TYPE-C USB数据线一根

3、Air780EGG核心板和数据线的硬件接线方式为

- Air780EGG核心板通过TYPE-C USB口供电；

- TYPE-C USB数据线直接插到核心板的TYPE-C USB座子，另外一端连接电脑USB口；


## 演示软件环境

1、Luatools下载调试工具

2、[Air780EGG V2024版本固件](https://docs.openluat.com/air780egh/luatos/firmware/version/)

## 演示核心步骤

1、搭建好硬件环境

2、通过Luatools将demo与固件烧录到核心板中

3、烧录好后，板子开机将会在Luatools上看到如下打印：

(1) 持续震动模式：

```lua
[2026-02-05 18:15:21.997][000000000.268] I/user.轻微检测
[2026-02-05 18:15:22.013][000000000.268] I2C_MasterSetup 426:I2C1, Total 260 HCNT 113 LCNT 136
[2026-02-05 18:15:22.023][000000000.269] W/user.mqtt_client_main_task_func wait IP_READY 1 1
[2026-02-05 18:15:22.034][000000000.371] I/user.i2c chipid 13 2
[2026-02-05 18:15:22.045][000000000.371] I/user.exvib init success
[2026-02-05 18:15:22.053][000000000.401] I/user.int 1
[2026-02-05 18:15:22.060][000000000.403] I/user.x 0.2714844g y 0.3144531g z 0.9599609g
[2026-02-05 18:15:22.195][000000001.270] W/user.mqtt_client_main_task_func wait IP_READY 1 1
[2026-02-05 18:15:23.029][000000002.271] W/user.mqtt_client_main_task_func wait IP_READY 1 1
[2026-02-05 18:15:23.113][000000002.306] luatos_mobile_event_callback 271:gprs set netif c102f60 in event 3 0 3
[2026-02-05 18:15:23.135][000000002.308] I/mobile sim0 sms ready
[2026-02-05 18:15:23.145][000000002.308] D/mobile cid1, state0
[2026-02-05 18:15:23.153][000000002.309] D/mobile bearer act 0, result 0
[2026-02-05 18:15:23.162][000000002.309] D/mobile NETIF_LINK_ON -> IP_READY
[2026-02-05 18:15:23.168][000000002.331] D/mobile TIME_SYNC 0 tm 1770286470
[2026-02-05 18:15:25.242][000000004.478] I/user.int 1
[2026-02-05 18:15:25.248][000000004.481] I/user.x 0.2685547g y 0.3378906g z 0.9951172g
[2026-02-05 18:15:25.747][000000004.983] I/user.int 0
[2026-02-05 18:15:26.408][000000005.642] I/user.int 1
[2026-02-05 18:15:26.415][000000005.645] I/user.x 0.2714844g y 0.4560547g z 0.9189453g
[2026-02-05 18:15:26.908][000000006.147] I/user.int 0
[2026-02-05 18:15:27.568][000000006.806] I/user.int 1
[2026-02-05 18:15:27.576][000000006.809] I/user.x 0.2285156g y 0.3740234g z 0.8427734g
[2026-02-05 18:15:28.072][000000007.311] I/user.int 0
[2026-02-05 18:15:28.731][000000007.969] I/user.int 1
[2026-02-05 18:15:28.739][000000007.972] I/user.x 0.1767578g y 0.5380859g z 1.124023g
[2026-02-05 18:15:29.233][000000008.475] I/user.int 0



```

(2) 有效震动模式：

```lua
[2026-02-05 18:12:52.144][000000028.795] I/user.int 1
[2026-02-05 18:12:52.152][000000028.796] I/user.table.remove 0
[2026-02-05 18:12:52.159][000000028.796] I/user.ipready2 true
[2026-02-05 18:12:52.167][000000028.797] I/user.tick 1770286319 false true
[2026-02-05 18:12:52.178][000000028.797] I/user.tick2 0 0 0 0 1770286319
[2026-02-05 18:12:52.649][000000029.300] I/user.int 0
[2026-02-05 18:12:52.790][000000029.442] I/user.int 1
[2026-02-05 18:12:52.798][000000029.442] I/user.table.remove 0
[2026-02-05 18:12:52.803][000000029.443] I/user.ipready2 true
[2026-02-05 18:12:52.810][000000029.443] I/user.tick 1770286319 false true
[2026-02-05 18:12:52.818][000000029.444] I/user.tick2 0 0 0 1770286319 1770286319
[2026-02-05 18:12:53.437][000000030.088] I/user.int 0
[2026-02-05 18:12:53.690][000000030.347] I/user.int 1
[2026-02-05 18:12:53.697][000000030.348] I/user.table.remove 0
[2026-02-05 18:12:53.704][000000030.348] I/user.ipready2 true
[2026-02-05 18:12:53.713][000000030.348] I/user.tick 1770286320 false true
[2026-02-05 18:12:53.721][000000030.349] I/user.tick2 0 0 1770286319 1770286319 1770286320
[2026-02-05 18:12:54.195][000000030.852] I/user.int 0
[2026-02-05 18:12:54.350][000000030.993] I/user.int 1
[2026-02-05 18:12:54.358][000000030.994] I/user.table.remove 0
[2026-02-05 18:12:54.366][000000030.994] I/user.ipready2 true
[2026-02-05 18:12:54.372][000000030.994] I/user.tick 1770286321 false true
[2026-02-05 18:12:54.380][000000030.995] I/user.tick2 0 1770286319 1770286319 1770286320 1770286321
[2026-02-05 18:12:54.854][000000031.498] I/user.int 0
[2026-02-05 18:12:55.060][000000031.704] I/user.int 1
[2026-02-05 18:12:55.068][000000031.705] I/user.table.remove 0
[2026-02-05 18:12:55.074][000000031.705] I/user.ipready2 true
[2026-02-05 18:12:55.082][000000031.705] I/user.tick 1770286321 true true
[2026-02-05 18:12:55.088][000000031.706] I/user.tick2 1770286319 1770286319 1770286320 1770286321 1770286321
[2026-02-05 18:12:55.095][000000031.706] I/user.vib xxx
[2026-02-05 18:12:55.101][000000031.707] I/user.触发有效震动


```
