## 演示模块概述

1、main.lua：主程序入口；

2、test_adc.lua：ADC测量功能模块；

## 演示功能概述

使用Air780EPM核心板测试ADC功能。

## 演示硬件环境

1、Air780EPM核心板一块

2、TYPE-C USB数据线一根

3、杜邦线若干

4、外部供电电源Air9000P

![](https://docs.openLuat.com/cdn/image/780EPM_adc.jpg)

## 演示软件环境

1、Luatools下载调试工具

2、[Air780EPM V2014版本固件]([固件和Demo - luatos@air780epm - 合宙模组资料中心](https://docs.openluat.com/air780epm/luatos/))（理论上，2025年8月10日之后发布的固件都可以）

## 演示核心步骤

1、搭建好硬件环境

2、Luatools烧录内核固件和demo脚本代码

3、烧录成功后，自动开机运行

4、如下是adc通道0设置ADC_RANGE_MIN量程外部供电1.2V，adc通道1设置ADC_RANGE_MAX量程外部供电1.2V，adc通道2设置ADC_RANGE_MAX量程外部供电3.3V，adc通道3设置ADC_RANGE_MIN量程外部供电3.3V的环境下测试的，代码运行结果如下：

这样设置量程和外部供电是为了更直观的观察两种量程下不同供电电压对精准度的影响，可以看到如下测量的数据是符合预期的

对于Air780EPM：ADC_RANGE_MIN对应量程为0-1.5V，ADC_RANGE_MAX对应量程为0-3.3V。

在外部供电1.2V的情况下，ADC_RANGE_MIN量程下获取到的数据更精准；在外部供电3.3V的情况下，ADC_RANGE_MIN量程下会限制在1.5v左右，ADC_RANGE_MAX可以正常测量。

```
[2025-09-10 16:13:57.926][000000517.170] I/user.adc通道0 处理值: 1194.88 mV (样本数:10)

[2025-09-10 16:13:57.946][000000517.174] I/user.adc通道1 处理值: 1189.00 mV (样本数:10)

[2025-09-10 16:13:57.967][000000517.178] I/user.adc通道2 处理值: 3376.75 mV (样本数:10)

[2025-09-10 16:13:57.992][000000517.182] I/user.adc通道3 处理值: 1565.00 mV (样本数:10)

[2025-09-10 16:13:58.016][000000517.187] I/user.CPU TEMP 温度值: 34.00 ℃(样本数:10)

[2025-09-10 16:13:58.042][000000517.191] I/user.VBAT 处理值: 4414.75 mV (样本数:10)

```
