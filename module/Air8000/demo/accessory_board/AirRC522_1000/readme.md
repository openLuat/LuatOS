## 功能模块介绍：

1. main.lua：主程序入口

2. rc522.lua ：rc522扩展库文件，在AirRC522_1000.lua功能模块中require使用

3. AirRC522_1000.lua：功能演示核心文件，在main.lua中加载运行，详细逻辑请看AirRC522_1000.lua 文件

## 演示功能概述：

核心逻辑：

1. 初始化并启用spi,如果初始化失败，退出程序

2. 初始化RC522模块,如果初始化失败，退出程序

3. 循环检测卡片。

4. 向卡片指定块号写入数据，并读取数据验证一致性

5. 读取卡片所有数据

## 演示硬件环境：

![](https://docs.openluat.com/accessory/AirSPINORFLASH_1000/image/spi1.jpg)

![](https://docs.openluat.com/accessory/AirSPINORFLASH_1000/image/rc522.jpg)

1. 合宙 Air8000 核心板一块

2. 合宙 AirRC522_1000 一套

3. TYPE-C USB 数据线一根 ，Air8000 核心板和数据线的硬件接线方式为：
* Air8000核心板通过 TYPE-C USB 口供电（核心板背面的开关拨到 USB ON 一端，正面开关拨到 供电 一端）

* TYPE-C USB 数据线直接插到核心板的 TYPE-C USB 座子，另外一端连接电脑 USB 口；
4. 杜邦线 7根
5. 
   Air8000 核心板与 AirRC522_1000 按以下方式接线：

| Air8000核心板       | AirRC522_1000 |
| ---------------- | ------------- |
| GND(任意)          | GND           |
| VDD_EXT          | 3.3V          |
| GPIO12/SPI1_CS   | SDA           |
| SPI1_SCLK        | SCK           |
| SPI1_MOSI        | MOSI          |
| SPI1_MISO        | MISO          |
| GPIO16(可选任意空闲IO) | RST           |

## 演示软件环境：

1. Luatools 下载调试工具

2. 固件版本：LuatOS-SoC_V2018_Air8000_1，固件地址，如有最新固件请用最新 [https://docs.openluat.com/air8000/luatos/firmware/](https://docs.openluat.com/air8000/luatos/firmware/)

3. pc 系统 win11（win10 及以上）

## 演示核心步骤：

1. 搭建好硬件环境

2. Luatools 烧录内核固件和demo 脚本代码。
   AirRC522_1000.lua脚本中,硬件配置参数中rst_pin是使用Air8000核心板的GPIO16，如果接其他IO，注意修改硬件配置参数中rst_pin对应的管脚号。

3. 烧录成功后，代码会自动运行，查看打印日志，如果正常运行，会打印相关信息，spi 初始化，rc522初始化，写入数据读取数据等。

4. 如下 log 显示：

```
[2025-12-01 15:03:45.780][000000000.374] I/user.main Air8000_rc522_DEMO 001.000.000
[2025-12-01 15:03:45.790][000000000.412] I/user.RC522 初始化SPI接口
[2025-12-01 15:03:45.799][000000000.413] SPI_HWInit 552:spi1 speed 2000000,1994805,154
[2025-12-01 15:03:45.805][000000000.413] I/user.RC522 SPI初始化成功
[2025-12-01 15:03:45.815][000000000.413] I/user.RC522 初始化RC522传感器
[2025-12-01 15:03:45.820][000000000.416] D/user.rc522.version 146
[2025-12-01 15:03:45.824][000000000.417] I/user.RC522 传感器初始化成功
[2025-12-01 15:03:45.831][000000000.417] I/user.RC522 开始检测卡片
[2025-12-01 15:03:45.835][000000000.424] I/user.RC522 检测到卡片，类型： 0400 4
[2025-12-01 15:03:45.839][000000000.430] I/user.RC522 卡片UID： E3E2AD14 8
[2025-12-01 15:03:45.845][000000000.526] I/user.RC522 数据写入成功，块号: 9 写入数据是： 01000000000000000000000000000000 32
[2025-12-01 15:03:45.904][000000000.580] I/user.RC522 写入验证成功，数据是: 01000000000000000000000000000000 32
[2025-12-01 15:03:45.913][000000000.581] I/user.RC522 开始读取卡片数据...
[2025-12-01 15:03:45.919][000000000.639] I/user.块[0] E3E2AD14B80804006263646566676869 32
[2025-12-01 15:03:45.923][000000000.716] I/user.块[1] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.031][000000000.814] I/user.块[2] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.040][000000000.942] I/user.块[3] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:46.045][000000001.011] I/user.块[4] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.056][000000001.084] I/user.块[5] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.130][000000001.152] I/user.块[6] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.195][000000001.219] I/user.块[7] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:46.273][000000001.289] I/user.块[8] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.337][000000001.354] I/user.块[9] 01000000000000000000000000000000 32
[2025-12-01 15:03:46.401][000000001.419] I/user.块[10] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.462][000000001.485] I/user.块[11] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:46.524][000000001.550] I/user.块[12] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.588][000000001.616] I/user.块[13] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.665][000000001.681] I/user.块[14] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.728][000000001.747] I/user.块[15] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:46.790][000000001.812] I/user.块[16] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.854][000000001.877] I/user.块[17] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.916][000000001.943] I/user.块[18] 00000000000000000000000000000000 32
[2025-12-01 15:03:46.994][000000002.009] I/user.块[19] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:47.056][000000002.074] I/user.块[20] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.118][000000002.139] I/user.块[21] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.180][000000002.204] I/user.块[22] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.241][000000002.269] I/user.块[23] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:47.319][000000002.335] I/user.块[24] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.382][000000002.400] I/user.块[25] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.443][000000002.466] I/user.块[26] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.505][000000002.532] I/user.块[27] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:47.607][000000002.589] D/mobile cid1, state0
[2025-12-01 15:03:47.611][000000002.591] D/mobile bearer act 0, result 0
[2025-12-01 15:03:47.615][000000002.592] D/mobile NETIF_LINK_ON -> IP_READY
[2025-12-01 15:03:47.619][000000002.628] I/user.块[28] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.623][000000002.632] D/mobile TIME_SYNC 0
[2025-12-01 15:03:47.676][000000002.694] I/user.块[29] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.738][000000002.759] I/user.块[30] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.801][000000002.825] I/user.块[31] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:47.863][000000002.890] I/user.块[32] 00000000000000000000000000000000 32
[2025-12-01 15:03:47.926][000000002.955] I/user.块[33] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.004][000000003.021] I/user.块[34] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.066][000000003.087] I/user.块[35] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:48.128][000000003.152] I/user.块[36] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.190][000000003.219] I/user.块[37] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.270][000000003.288] I/user.块[38] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.331][000000003.353] I/user.块[39] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:48.393][000000003.418] I/user.块[40] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.455][000000003.483] I/user.块[41] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.532][000000003.548] I/user.块[42] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.595][000000003.614] I/user.块[43] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:48.655][000000003.679] I/user.块[44] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.717][000000003.745] I/user.块[45] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.794][000000003.810] I/user.块[46] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.856][000000003.876] I/user.块[47] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:48.918][000000003.942] I/user.块[48] 00000000000000000000000000000000 32
[2025-12-01 15:03:48.983][000000004.007] I/user.块[49] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.044][000000004.073] I/user.块[50] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.123][000000004.138] I/user.块[51] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:49.187][000000004.204] I/user.块[52] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.249][000000004.270] I/user.块[53] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.311][000000004.335] I/user.块[54] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.375][000000004.401] I/user.块[55] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:49.438][000000004.467] I/user.块[56] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.515][000000004.533] I/user.块[57] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.577][000000004.600] I/user.块[58] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.639][000000004.667] I/user.块[59] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-01 15:03:49.716][000000004.732] I/user.块[60] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.779][000000004.797] I/user.块[61] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.843][000000004.862] I/user.块[62] 00000000000000000000000000000000 32
[2025-12-01 15:03:49.905][000000004.927] I/user.块[63] 000000000000FF078069FFFFFFFFFFFF 32

```
