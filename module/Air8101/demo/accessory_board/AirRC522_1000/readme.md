## 功能模块介绍：

1. main.lua：主程序入口

2. rc522.lua ：rc522扩展库文件，在AirRC522_1000.lua功能模块中require使用

3. AirRC522_1000.lua：功能演示核心文件，在main.lua中加载运行，详细逻辑请看AirRC522_1000.lua 文件

## 演示功能概述：

核心逻辑：

1. 初始化并启用spi,如果初始化失败，退出程序

2. 初始化RC522模块,如果初始化失败，退出程序

3. 循环检测卡片。

4. 向卡片指定块号写入数据，并读取数据验证一致性

5. 读取卡片所有数据

## 演示硬件环境：

![](https://docs.openluat.com/accessory/AirSPINORFLASH_1000/image/8101.jpg)

![](https://docs.openluat.com/accessory/AirSPINORFLASH_1000/image/rc522.jpg)

1. 合宙 Air8101 核心板一块

2. 合宙 AirRC522_1000一套

3. TYPE-C USB 数据线一根 ，Air8101 核心板和数据线的硬件接线方式为：
* Air8101核心板通过 TYPE-C USB 口供电；（背面功耗测试开关拨到off）

* TYPE-C USB 数据线直接插到开发板的 TYPE-C USB 座子，另外一端连接电脑 USB 口；
4. 杜邦线 7 根

   Air8101 核心板与 AirRC522_1000按以下方式接线：

| Air8101 核心板                                    | AirRC522_1000 |
| ---------------------------------------------- | ------------- |
| GND(任意)                                        | GND           |
| 59/3V3                                         | 3.3V          |
| 54/DISP                                        | SDA           |
| 28/DCLK                                        | SCK           |
| 57/DE                                          | MOSI          |
| 55/HSYN                                        | MISO          |
| 10/GPIO7(可选任意空闲IO) | RST           |

## 演示软件环境：

1. Luatools 下载调试工具

2. 固件版本：LuatOS-SoC_V1006_Air8101_1.soc，固件地址，如有最新固件请用最新 [https://docs.openluat.com/air8101/luatos/firmware/version/](https://docs.openluat.com/air8101/luatos/firmware/)

3. pc 系统 win11（win10 及以上）

## 演示核心步骤：

1. 搭建好硬件环境

2. Luatools 烧录内核固件和demo 脚本代码.
   AirRC522_1000.lua脚本中,硬件配置参数中rst_pin是使用Air8101核心板的GPIO7，如果接其他IO，注意修改硬件配置参数中rst_pin对应的管脚号。

3. 烧录成功后，代码会自动运行，查看打印日志，如果正常运行，会打印相关信息，spi 初始化，rc522初始化，写入数据读取数据等。

4. 如下 log 显示：

```
[2025-12-02 10:56:56.862] luat:U(172):D/user.rc522.version 178
[2025-12-02 10:56:56.862] luat:U(172):I/user.RC522 传感器初始化成功
[2025-12-02 10:56:56.862] luat:U(172):I/user.RC522 开始检测卡片
[2025-12-02 10:56:56.862] luat:U(178):I/user.RC522 检测到卡片，类型： 0400 4
[2025-12-02 10:56:56.862] luat:U(183):I/user.RC522 卡片UID： E3E2AD14 8
[2025-12-02 10:56:56.957] luat:U(263):I/user.RC522 数据写入成功，块号: 9 写入数据是： 01000000000000000000000000000000 32
[2025-12-02 10:56:56.962] luat:U(291):I/user.RC522 写入验证成功，数据是: 01000000000000000000000000000000 32
[2025-12-02 10:56:56.962] luat:U(291):I/user.RC522 开始读取卡片数据...
[2025-12-02 10:56:57.033] luat:U(339):I/user.块[0] E3E2AD14B80804006263646566676869 32
[2025-12-02 10:56:57.096] luat:U(405):I/user.块[1] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.159] luat:U(473):I/user.块[2] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.223] luat:U(541):I/user.块[3] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:57.299] luat:U(607):I/user.块[4] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.360] luat:U(673):I/user.块[5] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.423] luat:U(737):I/user.块[6] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.490] luat:U(805):I/user.块[7] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:57.562] luat:U(873):I/user.块[8] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.625] luat:U(941):I/user.块[9] 01000000000000000000000000000000 32
[2025-12-02 10:56:57.702] luat:U(1008):I/user.块[10] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.765] luat:U(1075):I/user.块[11] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:57.828] luat:U(1142):I/user.块[12] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.890] luat:U(1208):I/user.块[13] 00000000000000000000000000000000 32
[2025-12-02 10:56:57.968] luat:U(1274):I/user.块[14] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.031] luat:U(1342):I/user.块[15] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:58.092] luat:U(1410):I/user.块[16] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.169] luat:U(1478):I/user.块[17] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.230] luat:U(1544):I/user.块[18] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.295] luat:U(1612):I/user.块[19] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:58.370] luat:U(1678):I/user.块[20] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.433] luat:U(1744):I/user.块[21] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.495] luat:U(1810):I/user.块[22] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.558] luat:U(1876):I/user.块[23] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:58.634] luat:U(1942):I/user.块[24] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.696] luat:U(2009):I/user.块[25] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.758] luat:U(2076):I/user.块[26] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.834] luat:U(2143):I/user.块[27] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:58.897] luat:U(2209):I/user.块[28] 00000000000000000000000000000000 32
[2025-12-02 10:56:58.959] luat:U(2275):I/user.块[29] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.035] luat:U(2341):I/user.块[30] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.096] luat:U(2407):I/user.块[31] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:59.159] luat:U(2471):I/user.块[32] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.222] luat:U(2537):I/user.块[33] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.284] luat:U(2603):I/user.块[34] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.362] luat:U(2669):I/user.块[35] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:59.424] luat:U(2735):I/user.块[36] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.486] luat:U(2801):I/user.块[37] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.549] luat:U(2867):I/user.块[38] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.626] luat:U(2934):I/user.块[39] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:59.688] luat:U(2999):I/user.块[40] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.751] luat:U(3066):I/user.块[41] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.828] luat:U(3134):I/user.块[42] 00000000000000000000000000000000 32
[2025-12-02 10:56:59.890] luat:U(3200):I/user.块[43] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:56:59.952] luat:U(3266):I/user.块[44] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.016] luat:U(3332):I/user.块[45] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.081] luat:U(3398):I/user.块[46] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.157] luat:U(3464):I/user.块[47] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:57:00.219] luat:U(3530):I/user.块[48] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.282] luat:U(3596):I/user.块[49] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.345] luat:U(3662):I/user.块[50] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.409] luat:U(3728):I/user.块[51] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:57:00.486] luat:U(3794):I/user.块[52] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.548] luat:U(3860):I/user.块[53] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.610] luat:U(3927):I/user.块[54] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.687] luat:U(3993):I/user.块[55] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:57:00.750] luat:U(4059):I/user.块[56] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.812] luat:U(4125):I/user.块[57] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.874] luat:U(4191):I/user.块[58] 00000000000000000000000000000000 32
[2025-12-02 10:57:00.939] luat:U(4257):I/user.块[59] 000000000000FF078069FFFFFFFFFFFF 32
[2025-12-02 10:57:01.014] luat:U(4323):I/user.块[60] 00000000000000000000000000000000 32
[2025-12-02 10:57:01.077] luat:U(4389):I/user.块[61] 00000000000000000000000000000000 32
[2025-12-02 10:57:01.139] luat:U(4457):I/user.块[62] 00000000000000000000000000000000 32
[2025-12-02 10:57:01.218] luat:U(4525):I/user.块[63] 000000000000FF078069FFFFFFFFFFFF 32

```
